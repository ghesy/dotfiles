#!/bin/sh
# open the given path in lf.
set -e
path=${1:-$PWD}
if   [ -d "$path" ]; then
    cd "$path"
    setsid -f ${TERMINAL:?} >/dev/null 2>&1
elif [ -f "$path" ]; then
    case $path in */*) cd "${path%/*}" ;; esac
    setsid -f ${TERMINAL:?} -e sh -c 'ls -F --color=always -- "$0"; exec "$SHELL"' "${path##*/}" >/dev/null 2>&1
    printf '%s\n' "${path##*/}" | xclip -r -selection clipboard
else
    exit 1
fi

#!/bin/sh
# a wrapper for fre
# usage: freq --menu or freq PATH
[ $# -ne 1 ] && exit
command -v fre >/dev/null || exit
case $1 in
    --menu)
        fre --sorted | sed "s|^$HOME|~|" | ifne dmenu -l 10 -p freq |
            sed "s|^~|$HOME|" | xargs -rd'\n' termopen
    ;;
    /|"$HOME"|"${HOME%/}/") ;;
    *)
        p=$(realpath -- "$1")
        [ -d "$p" ] && p="${p%/}/"
        fre --add "$p"
esac

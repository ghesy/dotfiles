#!/bin/sh
# set wallpaper.
# option -n : only set the wallpaper, no pywal.

case "$1" in
    -n) feh --bg-fill -- "$2"; return ;;
    *)
        wal -s -t -i "$1" -a 88 || return 1

        # run my dunstinit script to reset dunst
        dunstinit &

        # reload firefox colors
        pywalfox update 2>/dev/null &

        # reload dwm colors
        xdotool key super+F12 &

        # reload st colors
        setsid -f sh -c 'sleep 0.1; killall -USR1 st' >/dev/null 2>&1 &

        # copy zathura and xresources pywal colors to their place
        cp ~/.cache/wal/zathura ~/.config/zathura/pywal-colors &
        cp ~/.cache/wal/colors.Xresources ~/.config/X11/pywal-colors &

        wait
    ;;
esac

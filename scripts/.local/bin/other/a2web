#!/bin/sh
# run a web user interface for aria2.
# requires the webui-aria2 package from aur, and node.

run () {
    command -v node >/dev/null || exit 1
    cd /usr/share/webapps/webui-aria2 || exit 1
    setsid -f "${BROWSER:-xdg-open}" "http://localhost:8888" >/dev/null 2>&1
    pgrep -xf 'node node-server.js' || node node-server.js
}

down () {
    pkill -xf 'node node-server.js'
}

case $1 in
    d | down) down;;
    *) run ;;
esac

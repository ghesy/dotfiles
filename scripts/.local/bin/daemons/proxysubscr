#!/bin/sh
# check if system's proxy is alive and report it to dwmbar-net.
trap 'pkill -P$$' HUP INT TERM
f=${XDG_RUNTIME_DIR:-/tmp}/dwmbar-proxy
while true; do
    timeout 15 proxychains -q curl -s ping.archlinux.org >/dev/null && echo >"$f" || :>"$f"
    dwmbarref net
    sleep 3m
done &
wait

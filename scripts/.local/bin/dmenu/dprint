#!/bin/sh
pidof -q cupsd || notify-send dprint "cups isn't running."
printer="$(lpstat -e | dmenu -p 'Choose Printer:')" || return 1
while true; do
    choice="$(printf '%s\n' ${1:+Print} Configure Jobs | dmenu -p Action:)" || return 1
    case "$choice" in
        Print) lp -d "$printer" -- "$@" 2>&1 | xargs -r0 notify-send dprint ;;
        Configure) system-config-printer >/dev/null 2>&1 ;;
        Jobs) system-config-printer --show-jobs "$printer" ;;
    esac
done
